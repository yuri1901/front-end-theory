# Детальний конспект: Зворотні посилання в регулярних виразах

## Загальна інформація

- **Опис**: Зворотні посилання (`\1`, `\2`, або `\k<name>`) дозволяють повторно зіставляти текст, захоплений групою, у межах того самого регулярного виразу.
- **Контекст**: Використовуються для пошуку повторюваних шаблонів (наприклад, парні теги HTML, повторні слова).
- **Основні компоненти**:
  - **Нумеровані зворотні посилання**: `\1`, `\2` тощо посилаються на захоплені групи за номером.
  - **Іменовані зворотні посилання**: `\k<name>` посилаються на іменовані групи.
- **Особливості**:
  - Зворотні посилання працюють лише із захоплювальними групами `(...)`.
  - Іменовані зворотні посилання підтримуються з ES2018.

## Приклади коду

### 1. Нумероване зворотне посилання

Пошук повторюваних слів.

```javascript
const str = "word word test";
const regex = /\b(\w+)\b\s+\1/g;
console.log(str.match(regex)); // ["word word"]
```

### 2. Зворотне посилання в HTML

Пошук парних тегів.

```javascript
const str = "<p>text</p><div>content</div>";
const regex = /<(\w+)>[^<]*<\/\1>/g;
console.log(str.match(regex)); // ["<p>text</p>", "<div>content</div>"]
```

### 3. Іменоване зворотне посилання

Пошук із іменованою групою.

```javascript
const str = "test test";
const regex = /\b(?<word>\w+)\b\s+\k<word>/g;
console.log(str.match(regex)); // ["test test"]
```

### 4. Використання в `replace`

Заміна повторного слова.

```javascript
const str = "hello hello world";
const regex = /\b(\w+)\b\s+\1/g;
console.log(str.replace(regex, "$1")); // "hello world"
```

## Особливості для співбесід — Питання та відповіді

### Що таке зворотні посилання?

- **Відповідь**: Посилання на захоплені групи (`\1`, `\k<name>`) для повторного зіставлення.
  ```javascript
  console.log("test test".match(/(\w+)\s+\1/)); // ["test test", "test"]
  ```

### Як працюють іменовані зворотні посилання?

- **Відповідь**: `\k<name>` посилається на групу `(?<name>...)`.
  ```javascript
  console.log("test test".match(/(?<word>\w+)\s+\k<word>/)); // ["test test", "test"]
  ```

### Чи можна використовувати зворотні посилання в `replace`?

- **Відповідь**: Так, через `$1`, `$2` або `$<name>` у рядку заміни.
  ```javascript
  console.log("a a".replace(/(\w+)\s+\1/, "$1")); // "a"
  ```

### Які обмеження зворотних посилань?

- **Відповідь**: Працюють лише із захоплювальними групами, а іменовані підтримуються з ES2018.
  ```javascript
  console.log("a a".match(/(?:\w+)\s+\1/)); // Error (незахідна група)
  ```

## Поради

- **Точність**: Переконайтеся, що номер або ім’я групи правильні.
- **Тестування**: Перевіряйте зворотні посилання на regex101.com.
- **Сумісність**: Іменовані зворотні посилання потребують сучасних браузерів.
- **Простота**: Уникайте складних зворотних посилань для читабельності.

## Додаткові деталі

- **Нумерація**: Групи нумеруються зліва направо, починаючи з 1.
- **Сумісність**: Іменовані зворотні посилання — Chrome 64+, Firefox 78+, Safari 11.1+.
- **Обмеження**: Зворотні посилання не працюють із незахоплювальними групами `(?:...)`.