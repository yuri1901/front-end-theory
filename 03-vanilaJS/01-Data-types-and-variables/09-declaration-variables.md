# Змінні в JavaScript

## Строгий режим

```js
"use strict";
```

Увімкнення строгого режиму дозволяє уникнути деяких поширених помилок і робить код більш безпечним.

Наприклад, забороняє використання неоголошених змінних.

## Основні поняття

**Змінна** — це іменована ділянка пам'яті, у якій зберігаються дані.

**Константа** — це змінна, значення якої не можна змінити після присвоєння.

### let

Оголошує змінну, область видимості — блочна (обмежена `{ ... }`).

- Переоголосити (`let`) в одному блоці не можна (помилка).
- Можна оголосити змінну без початкового значення.
- Піддається підняттю (hoisting), але не ініціалізована — доступ до неї до оголошення викличе помилку (Temporal Dead Zone).

**Приклад:**

```js
let name; // оголошення
name = "John"; // ініціалізація
console.log(name); // John
```

### const

Оголошує константу — значення не можна змінити.

- Область видимості — блочна.
- Має бути ініціалізована під час оголошення.
- Якщо це об'єкт чи масив — сам об'єкт можна змінювати (мутабельний), але посилання змінити не можна.

**Приклад:**

```js
const PI = 3.14;
// PI = 3; // помилка!

const arr = [1, 2, 3];
arr.push(4); // дозволено, змінюємо вміст масиву
console.log(arr); // [1,2,3,4]
```

### var

Оголошує змінну з функціональним скоупом (видимість у всій функції).

- Допускає повторне оголошення без помилок.
- Піддається hoisting і ініціалізується `undefined` (тому доступна до рядка оголошення).
- Може викликати неочікувані помилки через відсутність блочного скоупу.

**Приклад:**

```js
var x = 10;
if (true) {
  var x = 20;
  console.log(x); // 20
}
console.log(x); // 20 — змінна одна і та сама!
```

## Hoisting

Hoisting — це особливість JavaScript, при якій оголошення змінних і функцій "піднімаються" на початок своєї області видимості ще до виконання коду.

- Для `var` — оголошення піднімається і ініціалізується `undefined`.
- Для `let` і `const` — оголошення теж піднімаються, але не ініціалізуються, доступ до них до оголошення викликає помилку (Temporal Dead Zone).

## Scope (Області видимості)

- **Global scope** — глобальна область видимості, доступна скрізь у коді.
- **Function scope** — область видимості функції, доступна всередині функції (`var`).
- **Block scope** — область видимості блоку (межі `{ ... }`), доступна лише всередині блоку (`let`, `const`).

```js
function test(n) {
  if (n < 10) {
    var nmb = n;
  }
  return nmb;
}
const res = test(5);
// console.log(res); // 5
```

## Порівняння var, let і const

| Характеристика              | var                            | let                               | const                             |
| --------------------------- | ------------------------------ | --------------------------------- | --------------------------------- |
| Область видимості           | Функція                        | Блок                              | Блок                              |
| Hoisting                    | Так, ініціалізується undefined | Так, але не ініціалізується (TDZ) | Так, але не ініціалізується (TDZ) |
| Повторне оголошення         | Так                            | Ні                                | Ні                                |
| Присвоєння після оголошення | Так                            | Так                               | Ні                                |

## Поради

- Використовуй `const` за замовчуванням.
- Якщо потрібно змінювати значення — використовуй `let`.
- Уникай `var` — він застарілий і може призводити до багів.

## Приклади коду

```js
"use strict";

const name = "Alice";
// name = 'Bob'; // Помилка!

let age = 25;
age = 26; // Ок

var city = "Kyiv";
var city = "Lviv"; // Дозволено, але не рекомендується
```

## Особливості для співбесід — Питання та відповіді

### Чому `let` кращий за `var`?

- `let` має блочну область видимості, що запобігає багатьом помилкам, які трапляються з `var`, через функціональний скоуп.
- `let` не дозволяє повторно оголосити змінну в одному блоці, що підвищує безпеку коду.
- Завдяки Temporal Dead Zone, доступ до змінної до її оголошення викликає помилку, що допомагає уникати неочікуваних багів.

### Що таке Temporal Dead Zone (TDZ)?

- Це проміжок часу між входом в блок (scope) і фактичним оголошенням змінної `let` або `const`.
- У цей проміжок звернення до змінної призведе до помилки `ReferenceError`.
- TDZ допомагає уникати використання змінних до їх ініціалізації.

### Чим блочний скоуп відрізняється від функціонального?

- Блочний скоуп (`let`, `const`) обмежує видимість змінної лише блоком `{ ... }`.
- Функціональний скоуп (`var`) обмежує видимість змінної всією функцією, незалежно від блочних дужок.

### Чому використання `var` вважається небезпечним?

- `var` має функціональний скоуп, що часто призводить до неочікуваних поведінок при використанні у блоках (`if`, `for`).
- `var` допускає повторне оголошення, що може викликати плутанину.
- `var` ініціалізується `undefined` через hoisting, тому помилки в коді можуть бути складніші для виявлення.

### Пояснити hoisting і різницю з `let`/`const`

- Hoisting піднімає оголошення змінних на початок області видимості.
- Для `var` змінна ініціалізується значенням `undefined` відразу, тому доступна до рядка оголошення.
- Для `let` і `const` оголошення піднімаються, але не ініціалізуються, через що доступ до них до фактичного оголошення призводить до помилки (TDZ).

### Чому `const` не гарантує імутабельність об'єкта?

- `const` гарантує, що посилання на об'єкт не можна змінити, але внутрішній стан об'єкта (властивості) можна модифікувати.
- Щоб зробити об'єкт імутабельним, потрібні додаткові методи (наприклад, `Object.freeze()`).

### В яких випадках краще використовувати `const`?

- Коли значення змінної не має змінюватися після ініціалізації.
- Це допомагає уникнути випадкових змін і покращує читабельність коду.
- Використовувати `const` як стандартний варіант, переключаючись на `let` тільки тоді, коли значення потрібно змінити.
